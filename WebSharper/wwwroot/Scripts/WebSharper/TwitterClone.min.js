(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;b=a.WebSharper=a.WebSharper||{};c=b.Client=b.Client||{};d=b.Templating=b.Templating||{};e=a.TwitterClone_Templates=a.TwitterClone_Templates||{};f=b&&b.Strings;g=a.IntelliFactory;h=g&&g.Runtime;i=b&&b.Utils;j=a.console;k=b&&b.Concurrency;l=b&&b.Remoting;m=l&&l.AjaxRemotingProvider;n=b&&b.UI;o=n&&n.Var$1;p=n&&n.Templating;q=p&&p.Runtime;r=q&&q.Server;s=r&&r.ProviderBuilder;t=r&&r.Handler;u=r&&r.TemplateInstance;v=b&&b.List;w=n&&n.Doc;x=n&&n.AttrProxy;y=a.JSON;z=n&&n.Client;A=z&&z.Templates;c.Twitter$203$23=function(B){return function(C){var D,E,F,G,H;D=C.Vars.Hole("tweetid").$1.Get();E="\""+f.Join("\",\"",f.SplitChars(C.Vars.Hole("retweettags").$1.Get(),[","],0))+"\"";F="\""+f.Join("\",\"",f.SplitChars(C.Vars.Hole("retweetmentions").$1.Get(),[","],0))+"\"";G=((((h.Curried(function(I,J,K,L){return I("{\"tweetId\": \""+i.toSafe(J)+"\", \"tag\": ["+i.toSafe(K)+"], \"mention\": ["+i.toSafe(L)+"]}");},4))(a.id))(D))(E))(F);j.log(G);k.StartImmediate((H=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoReTweet:2079912140",[G]),function(I){B.Set(I);self.location.reload();return k.Zero();});})),null);};};c.Twitter$188$21=function(B){return function(C){var D,E,F,G,H;D=C.Vars.Hole("tweetcontent").$1.Get();E="\""+f.Join("\",\"",f.SplitChars(C.Vars.Hole("tweettags").$1.Get(),[","],0))+"\"";F="\""+f.Join("\",\"",f.SplitChars(C.Vars.Hole("tweetmentions").$1.Get(),[","],0))+"\"";G=((((h.Curried(function(I,J,K,L){return I("{\"content\": \""+i.toSafe(J)+"\", \"tag\": ["+i.toSafe(K)+"], \"mention\": ["+i.toSafe(L)+"]}");},4))(a.id))(D))(E))(F);j.log(G);k.StartImmediate((H=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoTweet:2079912140",[G]),function(I){B.Set(I);self.location.reload();return k.Zero();});})),null);};};c.Twitter=function(){var B,C,D,E,F,G;B=o.Create$1("");return(C=(D=(E=new s.New$1(),(E.h.push(t.EventQ2(E.k,"ontweet",function(){return E.i;},function(H){var I,J,K,L,M;I=H.Vars.Hole("tweetcontent").$1.Get();J="\""+f.Join("\",\"",f.SplitChars(H.Vars.Hole("tweettags").$1.Get(),[","],0))+"\"";K="\""+f.Join("\",\"",f.SplitChars(H.Vars.Hole("tweetmentions").$1.Get(),[","],0))+"\"";L=((((h.Curried(function(N,O,P,Q){return N("{\"content\": \""+i.toSafe(O)+"\", \"tag\": ["+i.toSafe(P)+"], \"mention\": ["+i.toSafe(Q)+"]}");},4))(a.id))(I))(J))(K);j.log(L);k.StartImmediate((M=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoTweet:2079912140",[L]),function(N){B.Set(N);self.location.reload();return k.Zero();});})),null);})),E)),(D.h.push(t.EventQ2(D.k,"onretweet",function(){return D.i;},function(H){var I,J,K,L,M;I=H.Vars.Hole("tweetid").$1.Get();J="\""+f.Join("\",\"",f.SplitChars(H.Vars.Hole("retweettags").$1.Get(),[","],0))+"\"";K="\""+f.Join("\",\"",f.SplitChars(H.Vars.Hole("retweetmentions").$1.Get(),[","],0))+"\"";L=((((h.Curried(function(N,O,P,Q){return N("{\"tweetId\": \""+i.toSafe(O)+"\", \"tag\": ["+i.toSafe(P)+"], \"mention\": ["+i.toSafe(Q)+"]}");},4))(a.id))(I))(J))(K);j.log(L);k.StartImmediate((M=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoReTweet:2079912140",[L]),function(N){B.Set(N);self.location.reload();return k.Zero();});})),null);})),D)),(F=t.CompleteHoles(C.k,C.h,[["tweetcontent",0],["tweettags",0],["tweetmentions",0],["tweetid",0],["retweettags",0],["retweetmentions",0]]),(G=new u.New(F[1],e.twitterform(F[0])),C.i=G,G))).get_Doc();};c.Account$172$24=function(){return function(B){var C,D;C=B.Vars.Hole("unfollowid").$1.Get();j.log(C);k.StartImmediate((D=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoUnfollow:2079912140",[C]),function(E){j.log(E);self.location.reload();return k.Zero();});})),null);};};c.Account$161$22=function(){return function(B){var C,D;C=B.Vars.Hole("followid").$1.Get();j.log(C);k.StartImmediate((D=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoFollow:2079912140",[C]),function(E){j.log(E);self.location.reload();return k.Zero();});})),null);};};c.Account=function(){var B,C,D,E,F;o.Create$1("");return(B=(C=(D=new s.New$1(),(D.h.push(t.EventQ2(D.k,"onfollow",function(){return D.i;},function(G){var H,I;H=G.Vars.Hole("followid").$1.Get();j.log(H);k.StartImmediate((I=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoFollow:2079912140",[H]),function(J){j.log(J);self.location.reload();return k.Zero();});})),null);})),D)),(C.h.push(t.EventQ2(C.k,"onunfollow",function(){return C.i;},function(G){var H,I;H=G.Vars.Hole("unfollowid").$1.Get();j.log(H);k.StartImmediate((I=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoUnfollow:2079912140",[H]),function(J){j.log(J);self.location.reload();return k.Zero();});})),null);})),C)),(E=t.CompleteHoles(B.k,B.h,[["followid",0],["unfollowid",0]]),(F=new u.New(E[1],e.accountform(E[0])),B.i=F,F))).get_Doc();};c.FollowList=function(B){return v.map(function(C){return w.Element("div",[],[w.Element("a",[x.Create("class","list-group-item")],[w.TextNode(C)])]);},(new m.New()).Sync("TwitterClone:WebSharper.Server.getFollowersList:1044191176",[B]));};c.Register$127$24=function(){return function(B){var C,D,E,F,G;C=B.Vars.Hole("registerusername").$1.Get();D=B.Vars.Hole("registeruserpass").$1.Get();E=B.Vars.Hole("registeruseremail").$1.Get();F=(((h.Curried3(function(H,I,J){return H("{\"email\": \""+i.toSafe(I)+"\", \"nickName\": \""+i.toSafe(J)+"\"}");}))(a.id))(E))(C);j.log(C+" : "+D+" : "+E);k.StartImmediate((G=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoRegister:-365253110",[C,D,F]),function(H){return y.parse(H).status==="success"?(self.location.replace("/"),k.Zero()):k.Zero();});})),null);};};c.Register=function(){var B,C,D,E;o.Create$1("");return(B=(C=new s.New$1(),(C.h.push(t.EventQ2(C.k,"onregister",function(){return C.i;},function(F){var G,H,I,J,K;G=F.Vars.Hole("registerusername").$1.Get();H=F.Vars.Hole("registeruserpass").$1.Get();I=F.Vars.Hole("registeruseremail").$1.Get();J=(((h.Curried3(function(L,M,N){return L("{\"email\": \""+i.toSafe(M)+"\", \"nickName\": \""+i.toSafe(N)+"\"}");}))(a.id))(I))(G);j.log(G+" : "+H+" : "+I);k.StartImmediate((K=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoRegister:-365253110",[G,H,J]),function(L){return y.parse(L).status==="success"?(self.location.replace("/"),k.Zero()):k.Zero();});})),null);})),C)),(D=t.CompleteHoles(B.k,B.h,[["registerusername",0],["registeruseremail",0],["registeruserpass",0]]),(E=new u.New(D[1],e.loginblock(D[0])),B.i=E,E))).get_Doc();};c.Login$106$21=function(){return function(B){var C,D,E;C=B.Vars.Hole("inputusername").$1.Get();D=B.Vars.Hole("inputuserpass").$1.Get();j.log(C+" : "+D);k.StartImmediate((E=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoLogin:1135531713",[C,D]),function(F){var G;G=y.parse(F).status;j.log(G);return G==="success"?(j.log("111"),self.location.replace("/"),k.Zero()):k.Zero();});})),null);};};c.Login=function(){var B,C,D,E;return(B=(C=new s.New$1(),(C.h.push(t.EventQ2(C.k,"onlogin",function(){return C.i;},function(F){var G,H,I;G=F.Vars.Hole("inputusername").$1.Get();H=F.Vars.Hole("inputuserpass").$1.Get();j.log(G+" : "+H);k.StartImmediate((I=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoLogin:1135531713",[G,H]),function(J){var K;K=y.parse(J).status;j.log(K);return K==="success"?(j.log("111"),self.location.replace("/"),k.Zero()):k.Zero();});})),null);})),C)),(D=t.CompleteHoles(B.k,B.h,[["inputusername",0],["inputuserpass",0]]),(E=new u.New(D[1],e.loginblock$1(D[0])),B.i=E,E))).get_Doc();};c.Test=function(){var B,C;B=w.Input([],o.Create$1(""));C=w.Element("div",[x.Create("class","panel-default")],[w.Element("div",[x.Create("class","panel-body")],[B])]);A.LoadLocalTemplates("");w.RunById("main",C);};c.Db$72$22=function(){return function(){var B;k.StartImmediate((B=null,k.Delay(function(){(new m.New()).Send("TwitterClone:WebSharper.Server.DoDBInit:6",[]);return k.Zero();})),null);};};c.Db=function(){var B,C,D,E,F;return(B=(C=(D=new s.New$1(),(D.h.push(t.EventQ2(D.k,"oninitdb",function(){return D.i;},function(){var G;k.StartImmediate((G=null,k.Delay(function(){(new m.New()).Send("TwitterClone:WebSharper.Server.DoDBInit:6",[]);return k.Zero();})),null);})),D)),(C.h.push({$:1,$0:"result",$1:"Sccess!"}),C)),(E=t.CompleteHoles(B.k,B.h,[["texttoreverse",0]]),(F=new u.New(E[1],e.mainform(E[0])),B.i=F,F))).get_Doc();};c.guest$40$26=h.Curried3(function(B,C,D){var E;return k.Start((E=null,k.Delay(function(){j.log("login");self.location.replace("/welcome");return k.Return(null);})),null);});c.guest=function(){return w.Element("div",[x.Create("style","margin-bottom: 20px")],[w.Element("p",[x.Create("style","display: inline; margin: 0 10px 15px 0")],[w.TextNode("click here to log in:")]),w.Element("button",[x.Create("class","btn btn-primary mybtn"),x.HandlerImpl("click",function(){return function(){var B;return k.Start((B=null,k.Delay(function(){j.log("login");self.location.replace("/welcome");return k.Return(null);})),null);};})],[w.TextNode("login")])]);};c.LoggedInUser$25$26=h.Curried3(function(B,C,D){var E;return k.Start((E=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoLogout:1075549400",[]),function(){self.location.replace("/");return k.Return(null);});})),null);});c.LoggedInUser=function(){return w.Element("div",[x.Create("style","margin-bottom: 20px")],[w.Element("p",[x.Create("style","display: inline; margin: 0 10px 15px 0")],[w.TextNode("click here to log out:")]),w.Element("button",[x.Create("class","btn btn-primary mybtn"),x.HandlerImpl("click",function(){return function(){var B;return k.Start((B=null,k.Delay(function(){return k.Bind((new m.New()).Async("TwitterClone:WebSharper.Server.DoLogout:1075549400",[]),function(){self.location.replace("/");return k.Return(null);});})),null);};})],[w.TextNode("logout")])]);};d.Twitter2$99$28=function(){return function(B){var C,D;C=B.Vars.Hole("mentionsearch").$1.Get();D=(new m.New()).Sync("TwitterClone:WebSharper.Server.getTweetsListString:-1557391100",["mention",C]);self.document.getElementById("TwitterList4").innerHTML=D;};};d.Twitter2$90$24=function(){return function(B){var C,D;C=B.Vars.Hole("tabsearch").$1.Get();D=(new m.New()).Sync("TwitterClone:WebSharper.Server.getTweetsListString:-1557391100",["tag",C]);self.document.getElementById("TwitterList3").innerHTML=D;};};e.twitterform=function(B){A.LoadLocalTemplates("twitter");return B?A.NamedTemplate("twitter",{$:1,$0:"twitterform"},B):void 0;};e.accountform=function(B){A.LoadLocalTemplates("account");return B?A.NamedTemplate("account",{$:1,$0:"accountform"},B):void 0;};e.loginblock=function(B){A.LoadLocalTemplates("register");return B?A.NamedTemplate("register",{$:1,$0:"loginblock"},B):void 0;};e.loginblock$1=function(B){A.LoadLocalTemplates("login");return B?A.NamedTemplate("login",{$:1,$0:"loginblock"},B):void 0;};e.mainform=function(B){A.LoadLocalTemplates("main");return B?A.NamedTemplate("main",{$:1,$0:"mainform"},B):void 0;};}(self));
