(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;b=a.WebSharper=a.WebSharper||{};c=b.Client=b.Client||{};d=a.TwitterClone_Templates=a.TwitterClone_Templates||{};e=b&&b.Strings;f=a.IntelliFactory;g=f&&f.Runtime;h=b&&b.Utils;i=a.console;j=b&&b.Concurrency;k=b&&b.Remoting;l=k&&k.AjaxRemotingProvider;m=b&&b.UI;n=m&&m.Var$1;o=m&&m.Templating;p=o&&o.Runtime;q=p&&p.Server;r=q&&q.ProviderBuilder;s=q&&q.Handler;t=q&&q.TemplateInstance;u=a.JSON;v=m&&m.Doc;w=m&&m.AttrProxy;x=m&&m.Client;y=x&&x.Templates;c.Twitter$185$23=function(z){return function(A){var B,C,D,E,F;B=A.Vars.Hole("tweetid").$1.Get();C="\""+e.Join("\",\"",e.SplitChars(A.Vars.Hole("retweettags").$1.Get(),[","],0))+"\"";D="\""+e.Join("\",\"",e.SplitChars(A.Vars.Hole("retweetmentions").$1.Get(),[","],0))+"\"";E=((((g.Curried(function(G,H,I,J){return G("{\"tweetId\": \""+h.toSafe(H)+"\", \"tag\": ["+h.toSafe(I)+"], \"mention\": ["+h.toSafe(J)+"]}");},4))(a.id))(B))(C))(D);i.log(E);j.StartImmediate((F=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoReTweet:2079912140",[E]),function(G){z.Set(G);return j.Zero();});})),null);};};c.Twitter$171$21=function(z){return function(A){var B,C,D,E,F;B=A.Vars.Hole("tweetcontent").$1.Get();C="\""+e.Join("\",\"",e.SplitChars(A.Vars.Hole("tweettags").$1.Get(),[","],0))+"\"";D="\""+e.Join("\",\"",e.SplitChars(A.Vars.Hole("tweetmentions").$1.Get(),[","],0))+"\"";E=((((g.Curried(function(G,H,I,J){return G("{\"content\": \""+h.toSafe(H)+"\", \"tag\": ["+h.toSafe(I)+"], \"mention\": ["+h.toSafe(J)+"]}");},4))(a.id))(B))(C))(D);i.log(E);j.StartImmediate((F=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoTweet:2079912140",[E]),function(G){z.Set(G);return j.Zero();});})),null);};};c.Twitter=function(){var z,A,B,C,D,E,F,G;z=n.Create$1("");return(A=(B=z.get_View(),(C=(D=(E=new r.New$1(),(E.h.push(s.EventQ2(E.k,"ontweet",function(){return E.i;},function(H){var I,J,K,L,M;I=H.Vars.Hole("tweetcontent").$1.Get();J="\""+e.Join("\",\"",e.SplitChars(H.Vars.Hole("tweettags").$1.Get(),[","],0))+"\"";K="\""+e.Join("\",\"",e.SplitChars(H.Vars.Hole("tweetmentions").$1.Get(),[","],0))+"\"";L=((((g.Curried(function(N,O,P,Q){return N("{\"content\": \""+h.toSafe(O)+"\", \"tag\": ["+h.toSafe(P)+"], \"mention\": ["+h.toSafe(Q)+"]}");},4))(a.id))(I))(J))(K);i.log(L);j.StartImmediate((M=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoTweet:2079912140",[L]),function(N){z.Set(N);return j.Zero();});})),null);})),E)),(D.h.push(s.EventQ2(D.k,"onretweet",function(){return D.i;},function(H){var I,J,K,L,M;I=H.Vars.Hole("tweetid").$1.Get();J="\""+e.Join("\",\"",e.SplitChars(H.Vars.Hole("retweettags").$1.Get(),[","],0))+"\"";K="\""+e.Join("\",\"",e.SplitChars(H.Vars.Hole("retweetmentions").$1.Get(),[","],0))+"\"";L=((((g.Curried(function(N,O,P,Q){return N("{\"tweetId\": \""+h.toSafe(O)+"\", \"tag\": ["+h.toSafe(P)+"], \"mention\": ["+h.toSafe(Q)+"]}");},4))(a.id))(I))(J))(K);i.log(L);j.StartImmediate((M=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoReTweet:2079912140",[L]),function(N){z.Set(N);return j.Zero();});})),null);})),D)),(C.h.push({$:2,$0:"result",$1:B}),C))),(F=s.CompleteHoles(A.k,A.h,[["tweetcontent",0],["tweettags",0],["tweetmentions",0],["tweetid",0],["retweettags",0],["retweetmentions",0]]),(G=new t.New(F[1],d.twitterform(F[0])),A.i=G,G))).get_Doc();};c.Account$155$24=function(){return function(z){var A,B;A=z.Vars.Hole("unfollowid").$1.Get();i.log(A);j.StartImmediate((B=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoUnfollow:2079912140",[A]),function(C){i.log(C);return j.Zero();});})),null);};};c.Account$145$22=function(){return function(z){var A,B;A=z.Vars.Hole("followid").$1.Get();i.log(A);j.StartImmediate((B=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoFollow:2079912140",[A]),function(C){i.log(C);return j.Zero();});})),null);};};c.Account=function(){var z,A,B,C,D;n.Create$1("");return(z=(A=(B=new r.New$1(),(B.h.push(s.EventQ2(B.k,"onfollow",function(){return B.i;},function(E){var F,G;F=E.Vars.Hole("followid").$1.Get();i.log(F);j.StartImmediate((G=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoFollow:2079912140",[F]),function(H){i.log(H);return j.Zero();});})),null);})),B)),(A.h.push(s.EventQ2(A.k,"onunfollow",function(){return A.i;},function(E){var F,G;F=E.Vars.Hole("unfollowid").$1.Get();i.log(F);j.StartImmediate((G=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoUnfollow:2079912140",[F]),function(H){i.log(H);return j.Zero();});})),null);})),A)),(C=s.CompleteHoles(z.k,z.h,[["followid",0],["unfollowid",0]]),(D=new t.New(C[1],d.accountform(C[0])),z.i=D,D))).get_Doc();};c.Register$125$24=function(){return function(z){var A,B,C,D,E;A=z.Vars.Hole("registerusername").$1.Get();B=z.Vars.Hole("registeruserpass").$1.Get();C=z.Vars.Hole("registeruseremail").$1.Get();D=(((g.Curried3(function(F,G,H){return F("{\"email\": \""+h.toSafe(G)+"\", \"nickName\": \""+h.toSafe(H)+"\"}");}))(a.id))(C))(A);i.log(A+" : "+B+" : "+C);j.StartImmediate((E=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoRegister:-365253110",[A,B,D]),function(F){return u.parse(F).status==="success"?(self.location.replace("/"),j.Zero()):j.Zero();});})),null);};};c.Register=function(){var z,A,B,C;n.Create$1("");return(z=(A=new r.New$1(),(A.h.push(s.EventQ2(A.k,"onregister",function(){return A.i;},function(D){var E,F,G,H,I;E=D.Vars.Hole("registerusername").$1.Get();F=D.Vars.Hole("registeruserpass").$1.Get();G=D.Vars.Hole("registeruseremail").$1.Get();H=(((g.Curried3(function(J,K,L){return J("{\"email\": \""+h.toSafe(K)+"\", \"nickName\": \""+h.toSafe(L)+"\"}");}))(a.id))(G))(E);i.log(E+" : "+F+" : "+G);j.StartImmediate((I=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoRegister:-365253110",[E,F,H]),function(J){return u.parse(J).status==="success"?(self.location.replace("/"),j.Zero()):j.Zero();});})),null);})),A)),(B=s.CompleteHoles(z.k,z.h,[["registerusername",0],["registeruseremail",0],["registeruserpass",0]]),(C=new t.New(B[1],d.loginblock(B[0])),z.i=C,C))).get_Doc();};c.Login$104$21=function(){return function(z){var A,B,C;A=z.Vars.Hole("inputusername").$1.Get();B=z.Vars.Hole("inputuserpass").$1.Get();i.log(A+" : "+B);j.StartImmediate((C=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoLogin:1135531713",[A,B]),function(D){var E;E=u.parse(D).status;i.log(E);return E==="success"?(i.log("111"),self.location.replace("/"),j.Zero()):j.Zero();});})),null);};};c.Login=function(){var z,A,B,C;return(z=(A=new r.New$1(),(A.h.push(s.EventQ2(A.k,"onlogin",function(){return A.i;},function(D){var E,F,G;E=D.Vars.Hole("inputusername").$1.Get();F=D.Vars.Hole("inputuserpass").$1.Get();i.log(E+" : "+F);j.StartImmediate((G=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoLogin:1135531713",[E,F]),function(H){var I;I=u.parse(H).status;i.log(I);return I==="success"?(i.log("111"),self.location.replace("/"),j.Zero()):j.Zero();});})),null);})),A)),(B=s.CompleteHoles(z.k,z.h,[["inputusername",0],["inputuserpass",0]]),(C=new t.New(B[1],d.loginblock$1(B[0])),z.i=C,C))).get_Doc();};c.Test=function(){var z,A;z=v.Input([],n.Create$1(""));A=v.Element("div",[w.Create("class","panel-default")],[v.Element("div",[w.Create("class","panel-body")],[z])]);y.LoadLocalTemplates("");v.RunById("main",A);};c.Db$70$22=function(){return function(){var z;j.StartImmediate((z=null,j.Delay(function(){(new l.New()).Send("TwitterClone:WebSharper.Server.DoDBInit:6",[]);return j.Zero();})),null);};};c.Db=function(){var z,A,B,C,D;return(z=(A=(B=new r.New$1(),(B.h.push(s.EventQ2(B.k,"oninitdb",function(){return B.i;},function(){var E;j.StartImmediate((E=null,j.Delay(function(){(new l.New()).Send("TwitterClone:WebSharper.Server.DoDBInit:6",[]);return j.Zero();})),null);})),B)),(A.h.push({$:1,$0:"result",$1:"Sccess!"}),A)),(C=s.CompleteHoles(z.k,z.h,[["texttoreverse",0]]),(D=new t.New(C[1],d.mainform(C[0])),z.i=D,D))).get_Doc();};c.guest$38$26=g.Curried3(function(z,A,B){var C;return j.Start((C=null,j.Delay(function(){i.log("login");self.location.replace("/welcome");return j.Return(null);})),null);});c.guest=function(){return v.Element("div",[w.Create("style","margin-bottom: 20px")],[v.Element("p",[w.Create("style","display: inline; margin: 0 10px 15px 0")],[v.TextNode("click here to log in:")]),v.Element("button",[w.Create("class","btn btn-primary mybtn"),w.HandlerImpl("click",function(){return function(){var z;return j.Start((z=null,j.Delay(function(){i.log("login");self.location.replace("/welcome");return j.Return(null);})),null);};})],[v.TextNode("login")])]);};c.LoggedInUser$23$26=g.Curried3(function(z,A,B){var C;return j.Start((C=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoLogout:1075549400",[]),function(){self.location.replace("/");return j.Return(null);});})),null);});c.LoggedInUser=function(){return v.Element("div",[w.Create("style","margin-bottom: 20px")],[v.Element("p",[w.Create("style","display: inline; margin: 0 10px 15px 0")],[v.TextNode("click here to log out:")]),v.Element("button",[w.Create("class","btn btn-primary mybtn"),w.HandlerImpl("click",function(){return function(){var z;return j.Start((z=null,j.Delay(function(){return j.Bind((new l.New()).Async("TwitterClone:WebSharper.Server.DoLogout:1075549400",[]),function(){self.location.replace("/");return j.Return(null);});})),null);};})],[v.TextNode("logout")])]);};d.twitterform=function(z){y.LoadLocalTemplates("twitter");return z?y.NamedTemplate("twitter",{$:1,$0:"twitterform"},z):void 0;};d.accountform=function(z){y.LoadLocalTemplates("account");return z?y.NamedTemplate("account",{$:1,$0:"accountform"},z):void 0;};d.loginblock=function(z){y.LoadLocalTemplates("register");return z?y.NamedTemplate("register",{$:1,$0:"loginblock"},z):void 0;};d.loginblock$1=function(z){y.LoadLocalTemplates("login");return z?y.NamedTemplate("login",{$:1,$0:"loginblock"},z):void 0;};d.mainform=function(z){y.LoadLocalTemplates("main");return z?y.NamedTemplate("main",{$:1,$0:"mainform"},z):void 0;};}(self));
